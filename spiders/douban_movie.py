# -*- coding:utf-8 -*-__author__ = 'wenbin'import requestsfrom lxml import etreeimport csvf = open('/Users/chenwenbin/PycharmProjects/spider/file/豆瓣电影top250.csv','w',encoding='utf-8')writer = csv.writer(f)writer.writerow(('电影名称','详情链接','颗星','评分','评分人数'))user_agent = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36'headers = {'User-Agent' : user_agent}def get_top_movie():    for i in range(0,250,25):        top_url = 'https://movie.douban.com/top250?start={}&filter='.format(i)        res = requests.get(url=top_url,headers=headers).text        html_etree = etree.HTML(res)        lis = html_etree.xpath('//*[@id="content"]/div/div[1]/ol/li')        for li in lis:            movie_name = li.xpath('./div/div[2]/div[1]/a/span[1]/text()')[0]            detail_url = li.xpath('./div/div[2]/div[1]/a/@href')[0]            rating = li.xpath('./div/div[2]/div[2]/div/span[1]/@class')[0]            rating_num = li.xpath('./div/div[2]/div[2]/div/span[2]/text()')[0]            content = li.xpath('./div/div[2]/div[2]/div/span[4]/text()')[0]            print(movie_name,detail_url,rating,rating_num,content)            writer.writerow((movie_name,detail_url,rating,rating_num,content))if __name__ == '__main__':    get_top_movie()